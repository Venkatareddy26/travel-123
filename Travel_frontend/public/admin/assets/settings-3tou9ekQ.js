import{u as S,r as a,j as e}from"./index-B4FkT-MR.js";function w(){const c=S(),[l,g]=a.useState(()=>localStorage.getItem("currentRole")||"employee"),[r,m]=a.useState(()=>{try{return JSON.parse(localStorage.getItem("local_users")||"[]")}catch{return[]}}),[p,o]=a.useState(!1),[d,u]=a.useState(""),[n,h]=a.useState(""),[i,x]=a.useState("");a.useEffect(()=>{try{m(JSON.parse(localStorage.getItem("local_users")||"[]"))}catch{}},[]);function v(){try{localStorage.removeItem("app_token"),localStorage.removeItem("currentUser"),localStorage.removeItem("currentRole"),window.dispatchEvent(new Event("logout"))}catch{}c("/login",{replace:!0})}function N(){try{localStorage.setItem("currentRole",l),window.dispatchEvent(new StorageEvent("storage",{key:"currentRole",newValue:l}))}catch{}alert("Role updated to "+l)}function j(t){try{const s="local-"+(t.email||"user");localStorage.setItem("app_token",s),localStorage.setItem("currentUser",JSON.stringify({name:t.name,email:t.email,avatar:t.avatar})),localStorage.setItem("currentRole",l),c("/dashboard")}catch(s){console.error("signin failed",s)}}function b(){if(!n||!i)return alert("Enter name, email and password");const t={id:Date.now(),name:d||n.split("@")[0],email:n,password:i},s=(r||[]).concat([t]);try{localStorage.setItem("local_users",JSON.stringify(s)),m(s),o(!1),u(""),h(""),x(""),alert("Account created â€” you can sign in from this page")}catch(f){console.error(f),alert("Failed to create account")}}return e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Settings"}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Session"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:"btn btn-danger",onClick:v,children:"Logout"}),e.jsx("button",{className:"btn",onClick:()=>c("/login"),children:"Sign in (go to login)"})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Local accounts (dev)"}),e.jsxs("div",{className:"space-y-2",children:[(r||[]).length?(r||[]).map(t=>e.jsxs("div",{className:"flex items-center justify-between p-2 elevated",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsx("div",{className:"text-xs text-muted",children:t.email})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn btn-ghost",onClick:()=>j(t),children:"Sign in as"})})]},t.id)):e.jsx("div",{className:"text-sm text-muted",children:"No local accounts created."}),p?e.jsxs("div",{className:"p-3 elevated",children:[e.jsx("div",{className:"mb-2",children:e.jsx("input",{placeholder:"Name",value:d,onChange:t=>u(t.target.value),className:"border px-2 py-1 w-full"})}),e.jsx("div",{className:"mb-2",children:e.jsx("input",{placeholder:"Email",value:n,onChange:t=>h(t.target.value),className:"border px-2 py-1 w-full"})}),e.jsx("div",{className:"mb-2",children:e.jsx("input",{placeholder:"Password",type:"password",value:i,onChange:t=>x(t.target.value),className:"border px-2 py-1 w-full"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"btn btn-primary",onClick:b,children:"Create"}),e.jsx("button",{className:"btn btn-ghost",onClick:()=>o(!1),children:"Cancel"})]})]}):e.jsx("button",{className:"btn",onClick:()=>o(!0),children:"Create new account"})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Role"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:l,onChange:t=>g(t.target.value),className:"border px-2 py-1 rounded",children:[e.jsx("option",{value:"employee",children:"Employee"}),e.jsx("option",{value:"manager",children:"Manager"}),e.jsx("option",{value:"finance",children:"Finance"}),e.jsx("option",{value:"admin",children:"Admin"})]}),e.jsx("button",{className:"btn",onClick:N,children:"Save role"})]}),e.jsx("div",{className:"text-xs text-muted mt-2",children:"Changing role here updates the local role for development and demo purposes."})]})]})}export{w as default};
