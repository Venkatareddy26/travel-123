import{u as U,r as m,j as e}from"./index-B4FkT-MR.js";function x(){return Math.random().toString(36).slice(2,9)}function q(b,v){try{const g=localStorage.getItem(b);return g?JSON.parse(g):v}catch{return v}}function J(b,v){try{localStorage.setItem(b,JSON.stringify(v))}catch{}}const D="td_policies_v1",V=()=>({id:x(),meta:{name:"Default Travel Policy",department:"Global",region:"All",groups:["All Employees"],costCenters:[]},rules:{booking:{airfareClass:"economy",advanceDays:14,preferDirect:!0},accommodation:{nightlyLimit:150,preferredTypes:["Hotel"]},transport:{taxiAllowed:!0,ridesharePreferred:!0,carClass:"standard"},insurance:{required:!0,provider:""},riskApproval:{type:"manual",autoThreshold:0}},versions:[{id:x(),ts:Date.now(),note:"Initial",snapshot:null}],createdAt:Date.now()});function F(){var w;const b=U(),[v,g]=m.useState({}),[d,u]=m.useState(()=>q(D,[V()])),[p,h]=m.useState(((w=d[0])==null?void 0:w.id)||null),[c,a]=m.useState(null),[N,y]=m.useState(""),k=m.useRef(),f=m.useRef(null);m.useEffect(()=>{J(D,d)},[d]),m.useEffect(()=>{!p&&d.length&&h(d[0].id)},[d,p]);function C(s){h(s),setTimeout(()=>{f.current&&f.current.scrollIntoView({behavior:"smooth",block:"start"})},60)}function P(){const s={id:x(),meta:{name:"New Policy",department:"",region:"",groups:[],costCenters:[]},rules:{booking:{airfareClass:"economy",advanceDays:14,preferDirect:!0},accommodation:{nightlyLimit:150,preferredTypes:["Hotel"]},transport:{taxiAllowed:!0,ridesharePreferred:!0,carClass:"standard"},insurance:{required:!1,provider:""},riskApproval:{type:"manual",autoThreshold:0}},versions:[],createdAt:Date.now()};u(r=>[s,...r]),h(s.id),a(s)}function R(s){u(r=>r.map(t=>{if(t.id!==s.id)return t;const l={id:x(),ts:Date.now(),note:N||"Saved",snapshot:{meta:s.meta,rules:s.rules}};return{...t,meta:s.meta,rules:s.rules,versions:[l,...t.versions||[]]}})),a(null),y("")}function j(){a(null),y("")}function T(s){var r;confirm("Delete this policy?")&&(u(t=>t.filter(l=>l.id!==s)),p===s&&h(((r=d[0])==null?void 0:r.id)||null))}function L(s){const r=d.find(l=>l.id===s);if(!r)return;const t={...r,id:x(),meta:{...r.meta,name:r.meta.name+" (Copy)"},createdAt:Date.now(),versions:[]};u(l=>[t,...l]),h(t.id)}function E(s){var n;const r=JSON.stringify(s,null,2),t=new Blob([r],{type:"application/json"}),l=URL.createObjectURL(t),i=document.createElement("a");i.href=l,i.download=`${((n=s.meta)==null?void 0:n.name)||"policy"}.json`,i.click(),URL.revokeObjectURL(l)}function O(){const s=JSON.stringify(d,null,2),r=new Blob([s],{type:"application/json"}),t=URL.createObjectURL(r),l=document.createElement("a");l.href=t,l.download="policies-all.json",l.click(),URL.revokeObjectURL(t)}function B(s){const r=s.target.files&&s.target.files[0];if(!r)return;const t=new FileReader;t.onload=()=>{try{const l=JSON.parse(t.result);if(Array.isArray(l)){const i=l.map(n=>({...n,id:x(),createdAt:Date.now(),versions:n.versions||[]}));u(n=>[...i,...n])}else if(l&&l.meta){const i={...l,id:x(),createdAt:Date.now(),versions:l.versions||[]};u(n=>[i,...n])}}catch{alert("Invalid JSON")}k.current.value=null},t.readAsText(r)}function I(s,r){if(!confirm("Restore this version?")||!d.find(i=>i.id===s))return;const l={id:x(),ts:Date.now(),note:"Restored",snapshot:r.snapshot};u(i=>i.map(n=>{var A,S;return n.id===s?{...n,meta:((A=r.snapshot)==null?void 0:A.meta)||n.meta,rules:((S=r.snapshot)==null?void 0:S.rules)||n.rules,versions:[l,...n.versions||[]]}:n}))}const o=d.find(s=>s.id===p)||null;return e.jsx("div",{className:"min-h-screen font-sans",style:{backgroundColor:"var(--bg-color)",color:"var(--text-color)"},children:e.jsxs("div",{className:"max-w-[1200px] mx-auto p-6",children:[e.jsxs("header",{className:"mb-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",style:{color:"var(--text-color)"},children:"Travel Policy Builder"}),e.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-muted)"},children:"Create and manage travel policies for your organization"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("button",{type:"button",onClick:P,className:"px-4 py-2 text-sm font-medium rounded-lg text-white",style:{backgroundColor:"var(--primary-color)"},children:"+ New Policy"}),e.jsx("button",{type:"button",onClick:O,className:"px-4 py-2 text-sm font-medium rounded-lg",style:{border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-color)"},children:"Export All"}),e.jsxs("label",{className:"px-4 py-2 text-sm font-medium rounded-lg cursor-pointer",style:{border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-color)"},children:["Import",e.jsx("input",{ref:k,type:"file",accept:"application/json",onChange:B,className:"hidden"})]}),e.jsx("button",{type:"button",onClick:()=>b(-1),className:"px-4 py-2 text-sm font-medium rounded-lg",style:{border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-color)"},children:"â† Back"})]})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsx("aside",{className:"col-span-12 lg:col-span-4",children:e.jsxs("div",{className:"rounded-xl p-5 sticky top-6",style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--border-color)",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"font-semibold",style:{color:"var(--text-color)"},children:["Policies (",d.length,")"]})}),e.jsxs("div",{className:"space-y-3 max-h-[65vh] overflow-auto pr-1",children:[d.map(s=>{var r,t,l;return e.jsxs("div",{className:"p-4 rounded-lg cursor-pointer transition-all",style:{backgroundColor:s.id===p?"rgba(99,102,241,0.08)":"transparent",border:s.id===p?"2px solid var(--primary-color)":"1px solid var(--border-color)"},onClick:()=>C(s.id),children:[e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium truncate",style:{color:"var(--text-color)"},children:(r=s.meta)==null?void 0:r.name}),e.jsxs("div",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:[((t=s.meta)==null?void 0:t.department)||"No department"," â€¢ ",((l=s.meta)==null?void 0:l.region)||"No region"]})]})}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("button",{type:"button",className:"px-2.5 py-1 text-xs font-medium rounded",style:{backgroundColor:"rgba(99,102,241,0.1)",color:"var(--primary-color)"},onClick:i=>{i.stopPropagation(),a(JSON.parse(JSON.stringify(s))),C(s.id)},children:"Edit"}),e.jsx("button",{type:"button",className:"px-2.5 py-1 text-xs font-medium rounded",style:{backgroundColor:"rgba(107,114,128,0.1)",color:"var(--text-muted)"},onClick:i=>{i.stopPropagation(),L(s.id)},children:"Duplicate"})]})]},s.id)}),d.length===0&&e.jsxs("div",{className:"text-center py-8",style:{color:"var(--text-muted)"},children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ“‹"}),"No policies yet"]})]})]})}),e.jsx("main",{className:"col-span-12 lg:col-span-8",ref:f,tabIndex:-1,children:o?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-xl p-5",style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--border-color)",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",style:{color:"var(--text-color)"},children:o.meta.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[e.jsx("span",{className:"px-2.5 py-1 text-xs font-medium rounded-full",style:{backgroundColor:"rgba(99,102,241,0.1)",color:"var(--primary-color)"},children:o.meta.department||"No department"}),e.jsx("span",{className:"px-2.5 py-1 text-xs font-medium rounded-full",style:{backgroundColor:"rgba(16,185,129,0.1)",color:"#059669"},children:o.meta.region||"No region"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>a(JSON.parse(JSON.stringify(o))),className:"px-4 py-2 text-sm font-medium rounded-lg text-white",style:{backgroundColor:"var(--primary-color)"},children:"Edit"}),e.jsx("button",{type:"button",onClick:()=>E(o),className:"px-4 py-2 text-sm font-medium rounded-lg",style:{border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-color)"},children:"Export"}),e.jsx("button",{type:"button",onClick:()=>T(o.id),className:"px-4 py-2 text-sm font-medium rounded-lg",style:{border:"1px solid #fecaca",backgroundColor:"rgba(239,68,68,0.05)",color:"#dc2626"},children:"Delete"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-xl p-5",style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--border-color)",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"text-xl",children:"âœˆï¸"}),e.jsx("h4",{className:"font-semibold",style:{color:"var(--text-color)"},children:"Booking Rules"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Airfare Class"}),e.jsx("span",{className:"text-sm font-medium px-2.5 py-1 rounded",style:{backgroundColor:"rgba(99,102,241,0.1)",color:"var(--primary-color)"},children:o.rules.booking.airfareClass})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Advance Booking"}),e.jsxs("span",{className:"text-sm font-medium",style:{color:"var(--text-color)"},children:[o.rules.booking.advanceDays," days"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Direct Flights"}),e.jsx("span",{className:`text-sm font-medium px-2.5 py-1 rounded ${o.rules.booking.preferDirect,""}`,style:{backgroundColor:o.rules.booking.preferDirect?"rgba(16,185,129,0.1)":"rgba(239,68,68,0.1)",color:o.rules.booking.preferDirect?"#059669":"#dc2626"},children:o.rules.booking.preferDirect?"Preferred":"Not required"})]})]})]}),e.jsxs("div",{className:"rounded-xl p-5",style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--border-color)",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"text-xl",children:"ðŸ¨"}),e.jsx("h4",{className:"font-semibold",style:{color:"var(--text-color)"},children:"Accommodation"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Nightly Limit"}),e.jsxs("span",{className:"text-sm font-bold",style:{color:"var(--text-color)"},children:["$",o.rules.accommodation.nightlyLimit]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Preferred Types"}),e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-color)"},children:(o.rules.accommodation.preferredTypes||[]).join(", ")||"Any"})]})]})]}),e.jsxs("div",{className:"rounded-xl p-5",style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--border-color)",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"text-xl",children:"ðŸš—"}),e.jsx("h4",{className:"font-semibold",style:{color:"var(--text-color)"},children:"Transportation"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Taxi"}),e.jsx("span",{className:"text-sm font-medium px-2.5 py-1 rounded",style:{backgroundColor:o.rules.transport.taxiAllowed?"rgba(16,185,129,0.1)":"rgba(239,68,68,0.1)",color:o.rules.transport.taxiAllowed?"#059669":"#dc2626"},children:o.rules.transport.taxiAllowed?"Allowed":"Not allowed"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Rideshare"}),e.jsx("span",{className:"text-sm font-medium px-2.5 py-1 rounded",style:{backgroundColor:o.rules.transport.ridesharePreferred?"rgba(16,185,129,0.1)":"rgba(107,114,128,0.1)",color:o.rules.transport.ridesharePreferred?"#059669":"var(--text-muted)"},children:o.rules.transport.ridesharePreferred?"Preferred":"Optional"})]})]})]}),e.jsxs("div",{className:"rounded-xl p-5",style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--border-color)",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"text-xl",children:"ðŸ›¡ï¸"}),e.jsx("h4",{className:"font-semibold",style:{color:"var(--text-color)"},children:"Insurance & Risk"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Insurance"}),e.jsx("span",{className:"text-sm font-medium px-2.5 py-1 rounded",style:{backgroundColor:o.rules.insurance.required?"rgba(16,185,129,0.1)":"rgba(245,158,11,0.1)",color:o.rules.insurance.required?"#059669":"#d97706"},children:o.rules.insurance.required?"Required":"Optional"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Risk Approval"}),e.jsx("span",{className:"text-sm font-medium px-2.5 py-1 rounded",style:{backgroundColor:"rgba(99,102,241,0.1)",color:"var(--primary-color)"},children:o.rules.riskApproval.type==="auto"?`Auto (up to $${o.rules.riskApproval.autoThreshold})`:"Manual"})]})]})]})]}),e.jsxs("div",{className:"rounded-xl p-5",style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--border-color)",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[e.jsx("h4",{className:"font-semibold mb-4",style:{color:"var(--text-color)"},children:"Assigned Groups & Cost Centers"}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[(o.meta.groups||[]).map((s,r)=>e.jsx("span",{className:"px-3 py-1.5 text-xs font-medium rounded-full",style:{backgroundColor:"rgba(99,102,241,0.1)",color:"var(--primary-color)"},children:s},r)),(o.meta.costCenters||[]).map((s,r)=>e.jsx("span",{className:"px-3 py-1.5 text-xs font-medium rounded-full",style:{backgroundColor:"rgba(245,158,11,0.1)",color:"#d97706"},children:s},r)),!(o.meta.groups||[]).length&&!(o.meta.costCenters||[]).length&&e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"No groups or cost centers assigned"})]})]}),e.jsxs("div",{className:"rounded-xl p-5",style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--border-color)",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[e.jsx("h4",{className:"font-semibold mb-4",style:{color:"var(--text-color)"},children:"Version History"}),e.jsxs("div",{className:"space-y-2 max-h-48 overflow-auto",children:[(o.versions||[]).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg",style:{backgroundColor:"rgba(0,0,0,0.02)"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",style:{color:"var(--text-color)"},children:new Date(s.ts).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsx("div",{className:"text-xs",style:{color:"var(--text-muted)"},children:s.note})]}),e.jsx("button",{type:"button",className:"px-3 py-1.5 text-xs font-medium rounded-lg",style:{border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-color)"},onClick:()=>I(o.id,s),children:"Restore"})]},s.id)),!(o.versions||[]).length&&e.jsx("div",{className:"text-sm py-4 text-center",style:{color:"var(--text-muted)"},children:"No saved versions yet"})]})]})]}):e.jsxs("div",{className:"rounded-xl p-8 text-center",style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--border-color)",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸ“„"}),e.jsx("div",{style:{color:"var(--text-muted)"},children:"Select a policy to view details"})]})})]}),c&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center p-4 overflow-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:j}),e.jsxs("div",{className:"relative rounded-xl w-full max-w-3xl my-8",style:{backgroundColor:"var(--card-bg)",boxShadow:"0 25px 50px -12px rgba(0,0,0,0.25)"},children:[e.jsxs("div",{className:"p-5 flex items-center justify-between",style:{borderBottom:"1px solid var(--border-color)"},children:[e.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--text-color)"},children:"Edit Policy"}),e.jsx("button",{type:"button",onClick:j,className:"p-2 rounded-lg hover:bg-gray-100",style:{color:"var(--text-muted)"},children:"âœ•"})]}),e.jsx("div",{className:"p-5 max-h-[70vh] overflow-auto",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold",style:{color:"var(--text-color)"},children:"Policy Details"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1.5",style:{color:"var(--text-muted)"},children:"Policy Name"}),e.jsx("input",{className:"w-full p-2.5 text-sm rounded-lg",style:{border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-color)"},value:c.meta.name,onChange:s=>a(r=>({...r,meta:{...r.meta,name:s.target.value}}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1.5",style:{color:"var(--text-muted)"},children:"Department"}),e.jsx("input",{className:"w-full p-2.5 text-sm rounded-lg",style:{border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-color)"},value:c.meta.department,onChange:s=>a(r=>({...r,meta:{...r.meta,department:s.target.value}}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1.5",style:{color:"var(--text-muted)"},children:"Region"}),e.jsx("input",{className:"w-full p-2.5 text-sm rounded-lg",style:{border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-color)"},value:c.meta.region,onChange:s=>a(r=>({...r,meta:{...r.meta,region:s.target.value}}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1.5",style:{color:"var(--text-muted)"},children:"Groups (comma separated)"}),e.jsx("input",{className:"w-full p-2.5 text-sm rounded-lg",style:{border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-color)"},value:(c.meta.groups||[]).join(", "),onChange:s=>a(r=>({...r,meta:{...r.meta,groups:s.target.value.split(",").map(t=>t.trim()).filter(Boolean)}}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1.5",style:{color:"var(--text-muted)"},children:"Cost Centers (comma separated)"}),e.jsx("input",{className:"w-full p-2.5 text-sm rounded-lg",style:{border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-color)"},value:(c.meta.costCenters||[]).join(", "),onChange:s=>a(r=>({...r,meta:{...r.meta,costCenters:s.target.value.split(",").map(t=>t.trim()).filter(Boolean)}}))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold",style:{color:"var(--text-color)"},children:"Booking Rules"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1.5",style:{color:"var(--text-muted)"},children:"Airfare Class"}),e.jsxs("select",{className:"w-full p-2.5 text-sm rounded-lg",style:{border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-color)"},value:c.rules.booking.airfareClass,onChange:s=>a(r=>({...r,rules:{...r.rules,booking:{...r.rules.booking,airfareClass:s.target.value}}})),children:[e.jsx("option",{value:"economy",children:"Economy"}),e.jsx("option",{value:"premium-economy",children:"Premium Economy"}),e.jsx("option",{value:"business",children:"Business"}),e.jsx("option",{value:"first",children:"First Class"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1.5",style:{color:"var(--text-muted)"},children:"Advance Booking (days)"}),e.jsx("input",{type:"number",className:"w-full p-2.5 text-sm rounded-lg",style:{border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-color)"},value:c.rules.booking.advanceDays,onChange:s=>a(r=>({...r,rules:{...r.rules,booking:{...r.rules.booking,advanceDays:Number(s.target.value)}}}))})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded",checked:c.rules.booking.preferDirect,onChange:s=>a(r=>({...r,rules:{...r.rules,booking:{...r.rules.booking,preferDirect:s.target.checked}}}))}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-color)"},children:"Prefer direct flights"})]}),e.jsx("h4",{className:"font-semibold pt-2",style:{color:"var(--text-color)"},children:"Accommodation"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1.5",style:{color:"var(--text-muted)"},children:"Nightly Limit (USD)"}),e.jsx("input",{type:"number",className:"w-full p-2.5 text-sm rounded-lg",style:{border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-color)"},value:c.rules.accommodation.nightlyLimit,onChange:s=>a(r=>({...r,rules:{...r.rules,accommodation:{...r.rules.accommodation,nightlyLimit:Number(s.target.value)}}}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1.5",style:{color:"var(--text-muted)"},children:"Preferred Types (comma separated)"}),e.jsx("input",{className:"w-full p-2.5 text-sm rounded-lg",style:{border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-color)"},value:(c.rules.accommodation.preferredTypes||[]).join(", "),onChange:s=>a(r=>({...r,rules:{...r.rules,accommodation:{...r.rules.accommodation,preferredTypes:s.target.value.split(",").map(t=>t.trim()).filter(Boolean)}}}))})]}),e.jsx("h4",{className:"font-semibold pt-2",style:{color:"var(--text-color)"},children:"Transportation"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded",checked:c.rules.transport.taxiAllowed,onChange:s=>a(r=>({...r,rules:{...r.rules,transport:{...r.rules.transport,taxiAllowed:s.target.checked}}}))}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-color)"},children:"Taxi allowed"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded",checked:c.rules.transport.ridesharePreferred,onChange:s=>a(r=>({...r,rules:{...r.rules,transport:{...r.rules.transport,ridesharePreferred:s.target.checked}}}))}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-color)"},children:"Rideshare preferred"})]}),e.jsx("h4",{className:"font-semibold pt-2",style:{color:"var(--text-color)"},children:"Insurance & Risk"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded",checked:c.rules.insurance.required,onChange:s=>a(r=>({...r,rules:{...r.rules,insurance:{...r.rules.insurance,required:s.target.checked}}}))}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-color)"},children:"Insurance required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1.5",style:{color:"var(--text-muted)"},children:"Risk Approval"}),e.jsxs("select",{className:"w-full p-2.5 text-sm rounded-lg",style:{border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-color)"},value:c.rules.riskApproval.type,onChange:s=>a(r=>({...r,rules:{...r.rules,riskApproval:{...r.rules.riskApproval,type:s.target.value}}})),children:[e.jsx("option",{value:"manual",children:"Manual Approval"}),e.jsx("option",{value:"auto",children:"Auto Approval"})]})]}),c.rules.riskApproval.type==="auto"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1.5",style:{color:"var(--text-muted)"},children:"Auto-approve up to (USD)"}),e.jsx("input",{type:"number",className:"w-full p-2.5 text-sm rounded-lg",style:{border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-color)"},value:c.rules.riskApproval.autoThreshold,onChange:s=>a(r=>({...r,rules:{...r.rules,riskApproval:{...r.rules.riskApproval,autoThreshold:Number(s.target.value)}}}))})]})]})]})}),e.jsxs("div",{className:"p-5 flex items-center justify-between gap-4",style:{borderTop:"1px solid var(--border-color)"},children:[e.jsx("input",{placeholder:"Version note (e.g., Updated nightly limit)",value:N,onChange:s=>y(s.target.value),className:"flex-1 p-2.5 text-sm rounded-lg",style:{border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-color)"}}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:j,className:"px-4 py-2 text-sm font-medium rounded-lg",style:{border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-color)"},children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>R(c),className:"px-4 py-2 text-sm font-medium rounded-lg text-white",style:{backgroundColor:"var(--primary-color)"},children:"Save Changes"})]})]})]})]})]})})}export{F as default};
