const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/GlobalMap-C0nfcmNL.js","assets/index-B4FkT-MR.js","assets/index-Dw4Vc4JP.css","assets/GlobalMap-Dgihpmma.css","assets/RiskFeed-Bb5iKY7I.js","assets/WidgetManager-DXBWONO-.js","assets/CorporateDonut-DjI_qHSz.js"])))=>i.map(i=>d[i]);
import{g as Pe,a as ze,r as p,j as t,u as Ve,b as qe,c as Ge,_ as fe}from"./index-B4FkT-MR.js";var je={exports:{}};/*!
* tabbable 6.3.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var _e=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],oe=_e.join(","),Re=typeof Element>"u",W=Re?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,le=!Re&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n==null?void 0:n.ownerDocument},re=function(e,r){var a;r===void 0&&(r=!0);var s=e==null||(a=e.getAttribute)===null||a===void 0?void 0:a.call(e,"inert"),u=s===""||s==="true",i=u||r&&e&&re(e.parentNode);return i},Je=function(e){var r,a=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"contenteditable");return a===""||a==="true"},Ae=function(e,r,a){if(re(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(oe));return r&&W.call(e,oe)&&s.unshift(e),s=s.filter(a),s},ce=function(e,r,a){for(var s=[],u=Array.from(e);u.length;){var i=u.shift();if(!re(i,!1))if(i.tagName==="SLOT"){var f=i.assignedElements(),v=f.length?f:i.children,m=ce(v,!0,a);a.flatten?s.push.apply(s,m):s.push({scopeParent:i,candidates:m})}else{var w=W.call(i,oe);w&&a.filter(i)&&(r||!e.includes(i))&&s.push(i);var E=i.shadowRoot||typeof a.getShadowRoot=="function"&&a.getShadowRoot(i),C=!re(E,!1)&&(!a.shadowRootFilter||a.shadowRootFilter(i));if(E&&C){var P=ce(E===!0?i.children:E.children,!0,a);a.flatten?s.push.apply(s,P):s.push({scopeParent:i,candidates:P})}else u.unshift.apply(u,i.children)}}return s},Ie=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},K=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Je(e))&&!Ie(e)?0:e.tabIndex},We=function(e,r){var a=K(e);return a<0&&r&&!Ie(e)?0:a},He=function(e,r){return e.tabIndex===r.tabIndex?e.documentOrder-r.documentOrder:e.tabIndex-r.tabIndex},Le=function(e){return e.tagName==="INPUT"},Ye=function(e){return Le(e)&&e.type==="hidden"},Ze=function(e){var r=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(a){return a.tagName==="SUMMARY"});return r},Xe=function(e,r){for(var a=0;a<e.length;a++)if(e[a].checked&&e[a].form===r)return e[a]},Qe=function(e){if(!e.name)return!0;var r=e.form||le(e),a=function(f){return r.querySelectorAll('input[type="radio"][name="'+f+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=a(window.CSS.escape(e.name));else try{s=a(e.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var u=Xe(s,e.form);return!u||u===e},et=function(e){return Le(e)&&e.type==="radio"},tt=function(e){return et(e)&&!Qe(e)},at=function(e){var r,a=e&&le(e),s=(r=a)===null||r===void 0?void 0:r.host,u=!1;if(a&&a!==e){var i,f,v;for(u=!!((i=s)!==null&&i!==void 0&&(f=i.ownerDocument)!==null&&f!==void 0&&f.contains(s)||e!=null&&(v=e.ownerDocument)!==null&&v!==void 0&&v.contains(e));!u&&s;){var m,w,E;a=le(s),s=(m=a)===null||m===void 0?void 0:m.host,u=!!((w=s)!==null&&w!==void 0&&(E=w.ownerDocument)!==null&&E!==void 0&&E.contains(s))}}return u},Te=function(e){var r=e.getBoundingClientRect(),a=r.width,s=r.height;return a===0&&s===0},rt=function(e,r){var a=r.displayCheck,s=r.getShadowRoot;if(a==="full-native"&&"checkVisibility"in e){var u=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!u}if(getComputedStyle(e).visibility==="hidden")return!0;var i=W.call(e,"details>summary:first-of-type"),f=i?e.parentElement:e;if(W.call(f,"details:not([open]) *"))return!0;if(!a||a==="full"||a==="full-native"||a==="legacy-full"){if(typeof s=="function"){for(var v=e;e;){var m=e.parentElement,w=le(e);if(m&&!m.shadowRoot&&s(m)===!0)return Te(e);e.assignedSlot?e=e.assignedSlot:!m&&w!==e.ownerDocument?e=w.host:e=m}e=v}if(at(e))return!e.getClientRects().length;if(a!=="legacy-full")return!0}else if(a==="non-zero-area")return Te(e);return!1},nt=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var r=e.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var a=0;a<r.children.length;a++){var s=r.children.item(a);if(s.tagName==="LEGEND")return W.call(r,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}r=r.parentElement}return!1},ue=function(e,r){return!(r.disabled||re(r)||Ye(r)||rt(r,e)||Ze(r)||nt(r))},ye=function(e,r){return!(tt(r)||K(r)<0||!ue(e,r))},it=function(e){var r=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(r)||r>=0)},$e=function(e){var r=[],a=[];return e.forEach(function(s,u){var i=!!s.scopeParent,f=i?s.scopeParent:s,v=We(f,i),m=i?$e(s.candidates):f;v===0?i?r.push.apply(r,m):r.push(f):a.push({documentOrder:u,tabIndex:v,item:s,isScope:i,content:m})}),a.sort(He).reduce(function(s,u){return u.isScope?s.push.apply(s,u.content):s.push(u.content),s},[]).concat(r)},Be=function(e,r){r=r||{};var a;return r.getShadowRoot?a=ce([e],r.includeContainer,{filter:ye.bind(null,r),flatten:!1,getShadowRoot:r.getShadowRoot,shadowRootFilter:it}):a=Ae(e,r.includeContainer,ye.bind(null,r)),$e(a)},Me=function(e,r){r=r||{};var a;return r.getShadowRoot?a=ce([e],r.includeContainer,{filter:ue.bind(null,r),flatten:!0,getShadowRoot:r.getShadowRoot}):a=Ae(e,r.includeContainer,ue.bind(null,r)),a},G=function(e,r){if(r=r||{},!e)throw new Error("No node provided");return W.call(e,oe)===!1?!1:ye(r,e)},st=_e.concat("iframe").join(","),se=function(e,r){if(r=r||{},!e)throw new Error("No node provided");return W.call(e,st)===!1?!1:ue(r,e)};const ot=Object.freeze(Object.defineProperty({__proto__:null,focusable:Me,getTabIndex:K,isFocusable:se,isTabbable:G,tabbable:Be},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 7.6.6
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function xe(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,a=Array(e);r<e;r++)a[r]=n[r];return a}function lt(n){if(Array.isArray(n))return xe(n)}function ct(n,e,r){return(e=ht(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function ut(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function dt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Se(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,a)}return r}function ke(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Se(Object(r),!0).forEach(function(a){ct(n,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(r,a))})}return n}function ft(n){return lt(n)||ut(n)||pt(n)||dt()}function vt(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var a=r.call(n,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ht(n){var e=vt(n,"string");return typeof e=="symbol"?e:e+""}function pt(n,e){if(n){if(typeof n=="string")return xe(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xe(n,e):void 0}}var Ee={activateTrap:function(e,r){if(e.length>0){var a=e[e.length-1];a!==r&&a._setPausedState(!0)}var s=e.indexOf(r);s===-1||e.splice(s,1),e.push(r)},deactivateTrap:function(e,r){var a=e.indexOf(r);a!==-1&&e.splice(a,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},mt=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},bt=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},ae=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},gt=function(e){return ae(e)&&!e.shiftKey},yt=function(e){return ae(e)&&e.shiftKey},De=function(e){return setTimeout(e,0)},X=function(e){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,a):e},ne=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},xt=[],Nt=function(e,r){var a=(r==null?void 0:r.document)||document,s=(r==null?void 0:r.trapStack)||xt,u=ke({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:gt,isKeyBackward:yt},r),i={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},f,v=function(o,c,h){return o&&o[c]!==void 0?o[c]:u[h||c]},m=function(o,c){var h=typeof(c==null?void 0:c.composedPath)=="function"?c.composedPath():void 0;return i.containerGroups.findIndex(function(N){var j=N.container,l=N.tabbableNodes;return j.contains(o)||(h==null?void 0:h.includes(j))||l.find(function(d){return d===o})})},w=function(o){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=c.hasFallback,N=h===void 0?!1:h,j=c.params,l=j===void 0?[]:j,d=u[o];if(typeof d=="function"&&(d=d.apply(void 0,ft(l))),d===!0&&(d=void 0),!d){if(d===void 0||d===!1)return d;throw new Error("`".concat(o,"` was specified but was not a node, or did not return a node"))}var b=d;if(typeof d=="string"){try{b=a.querySelector(d)}catch(g){throw new Error("`".concat(o,'` appears to be an invalid selector; error="').concat(g.message,'"'))}if(!b&&!N)throw new Error("`".concat(o,"` as selector refers to no known node"))}return b},E=function(){var o=w("initialFocus",{hasFallback:!0});if(o===!1)return!1;if(o===void 0||o&&!se(o,u.tabbableOptions))if(m(a.activeElement)>=0)o=a.activeElement;else{var c=i.tabbableGroups[0],h=c&&c.firstTabbableNode;o=h||w("fallbackFocus")}else o===null&&(o=w("fallbackFocus"));if(!o)throw new Error("Your focus-trap needs to have at least one focusable element");return o},C=function(){if(i.containerGroups=i.containers.map(function(o){var c=Be(o,u.tabbableOptions),h=Me(o,u.tabbableOptions),N=c.length>0?c[0]:void 0,j=c.length>0?c[c.length-1]:void 0,l=h.find(function(g){return G(g)}),d=h.slice().reverse().find(function(g){return G(g)}),b=!!c.find(function(g){return K(g)>0});return{container:o,tabbableNodes:c,focusableNodes:h,posTabIndexesFound:b,firstTabbableNode:N,lastTabbableNode:j,firstDomTabbableNode:l,lastDomTabbableNode:d,nextTabbableNode:function(A){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,I=c.indexOf(A);return I<0?$?h.slice(h.indexOf(A)+1).find(function(y){return G(y)}):h.slice(0,h.indexOf(A)).reverse().find(function(y){return G(y)}):c[I+($?1:-1)]}}}),i.tabbableGroups=i.containerGroups.filter(function(o){return o.tabbableNodes.length>0}),i.tabbableGroups.length<=0&&!w("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(i.containerGroups.find(function(o){return o.posTabIndexesFound})&&i.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},P=function(o){var c=o.activeElement;if(c)return c.shadowRoot&&c.shadowRoot.activeElement!==null?P(c.shadowRoot):c},R=function(o){if(o!==!1&&o!==P(document)){if(!o||!o.focus){R(E());return}o.focus({preventScroll:!!u.preventScroll}),i.mostRecentlyFocusedNode=o,mt(o)&&o.select()}},H=function(o){var c=w("setReturnFocus",{params:[o]});return c||(c===!1?!1:o)},z=function(o){var c=o.target,h=o.event,N=o.isBackward,j=N===void 0?!1:N;c=c||ne(h),C();var l=null;if(i.tabbableGroups.length>0){var d=m(c,h),b=d>=0?i.containerGroups[d]:void 0;if(d<0)j?l=i.tabbableGroups[i.tabbableGroups.length-1].lastTabbableNode:l=i.tabbableGroups[0].firstTabbableNode;else if(j){var g=i.tabbableGroups.findIndex(function(k){var ve=k.firstTabbableNode;return c===ve});if(g<0&&(b.container===c||se(c,u.tabbableOptions)&&!G(c,u.tabbableOptions)&&!b.nextTabbableNode(c,!1))&&(g=d),g>=0){var A=g===0?i.tabbableGroups.length-1:g-1,$=i.tabbableGroups[A];l=K(c)>=0?$.lastTabbableNode:$.lastDomTabbableNode}else ae(h)||(l=b.nextTabbableNode(c,!1))}else{var I=i.tabbableGroups.findIndex(function(k){var ve=k.lastTabbableNode;return c===ve});if(I<0&&(b.container===c||se(c,u.tabbableOptions)&&!G(c,u.tabbableOptions)&&!b.nextTabbableNode(c))&&(I=d),I>=0){var y=I===i.tabbableGroups.length-1?0:I+1,x=i.tabbableGroups[y];l=K(c)>=0?x.firstTabbableNode:x.firstDomTabbableNode}else ae(h)||(l=b.nextTabbableNode(c))}}else l=w("fallbackFocus");return l},O=function(o){var c=ne(o);if(!(m(c,o)>=0)){if(X(u.clickOutsideDeactivates,o)){f.deactivate({returnFocus:u.returnFocusOnDeactivate});return}X(u.allowOutsideClick,o)||o.preventDefault()}},D=function(o){var c=ne(o),h=m(c,o)>=0;if(h||c instanceof Document)h&&(i.mostRecentlyFocusedNode=c);else{o.stopImmediatePropagation();var N,j=!0;if(i.mostRecentlyFocusedNode)if(K(i.mostRecentlyFocusedNode)>0){var l=m(i.mostRecentlyFocusedNode),d=i.containerGroups[l].tabbableNodes;if(d.length>0){var b=d.findIndex(function(g){return g===i.mostRecentlyFocusedNode});b>=0&&(u.isKeyForward(i.recentNavEvent)?b+1<d.length&&(N=d[b+1],j=!1):b-1>=0&&(N=d[b-1],j=!1))}}else i.containerGroups.some(function(g){return g.tabbableNodes.some(function(A){return K(A)>0})})||(j=!1);else j=!1;j&&(N=z({target:i.mostRecentlyFocusedNode,isBackward:u.isKeyBackward(i.recentNavEvent)})),R(N||i.mostRecentlyFocusedNode||E())}i.recentNavEvent=void 0},F=function(o){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;i.recentNavEvent=o;var h=z({event:o,isBackward:c});h&&(ae(o)&&o.preventDefault(),R(h))},_=function(o){(u.isKeyForward(o)||u.isKeyBackward(o))&&F(o,u.isKeyBackward(o))},L=function(o){bt(o)&&X(u.escapeDeactivates,o)!==!1&&(o.preventDefault(),f.deactivate())},B=function(o){var c=ne(o);m(c,o)>=0||X(u.clickOutsideDeactivates,o)||X(u.allowOutsideClick,o)||(o.preventDefault(),o.stopImmediatePropagation())},M=function(){if(i.active)return Ee.activateTrap(s,f),i.delayInitialFocusTimer=u.delayInitialFocus?De(function(){R(E())}):R(E()),a.addEventListener("focusin",D,!0),a.addEventListener("mousedown",O,{capture:!0,passive:!1}),a.addEventListener("touchstart",O,{capture:!0,passive:!1}),a.addEventListener("click",B,{capture:!0,passive:!1}),a.addEventListener("keydown",_,{capture:!0,passive:!1}),a.addEventListener("keydown",L),f},S=function(){if(i.active)return a.removeEventListener("focusin",D,!0),a.removeEventListener("mousedown",O,!0),a.removeEventListener("touchstart",O,!0),a.removeEventListener("click",B,!0),a.removeEventListener("keydown",_,!0),a.removeEventListener("keydown",L),f},U=function(o){var c=o.some(function(h){var N=Array.from(h.removedNodes);return N.some(function(j){return j===i.mostRecentlyFocusedNode})});c&&R(E())},V=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(U):void 0,q=function(){V&&(V.disconnect(),i.active&&!i.paused&&i.containers.map(function(o){V.observe(o,{subtree:!0,childList:!0})}))};return f={get active(){return i.active},get paused(){return i.paused},activate:function(o){if(i.active)return this;var c=v(o,"onActivate"),h=v(o,"onPostActivate"),N=v(o,"checkCanFocusTrap");N||C(),i.active=!0,i.paused=!1,i.nodeFocusedBeforeActivation=P(a),c==null||c();var j=function(){N&&C(),M(),q(),h==null||h()};return N?(N(i.containers.concat()).then(j,j),this):(j(),this)},deactivate:function(o){if(!i.active)return this;var c=ke({onDeactivate:u.onDeactivate,onPostDeactivate:u.onPostDeactivate,checkCanReturnFocus:u.checkCanReturnFocus},o);clearTimeout(i.delayInitialFocusTimer),i.delayInitialFocusTimer=void 0,S(),i.active=!1,i.paused=!1,q(),Ee.deactivateTrap(s,f);var h=v(c,"onDeactivate"),N=v(c,"onPostDeactivate"),j=v(c,"checkCanReturnFocus"),l=v(c,"returnFocus","returnFocusOnDeactivate");h==null||h();var d=function(){De(function(){l&&R(H(i.nodeFocusedBeforeActivation)),N==null||N()})};return l&&j?(j(H(i.nodeFocusedBeforeActivation)).then(d,d),this):(d(),this)},pause:function(o){return i.active?(i.manuallyPaused=!0,this._setPausedState(!0,o)):this},unpause:function(o){return i.active?(i.manuallyPaused=!1,s[s.length-1]!==this?this:this._setPausedState(!1,o)):this},updateContainerElements:function(o){var c=[].concat(o).filter(Boolean);return i.containers=c.map(function(h){return typeof h=="string"?a.querySelector(h):h}),i.active&&C(),q(),this}},Object.defineProperties(f,{_isManuallyPaused:{value:function(){return i.manuallyPaused}},_setPausedState:{value:function(o,c){if(i.paused===o)return this;if(i.paused=o,o){var h=v(c,"onPause"),N=v(c,"onPostPause");h==null||h(),S(),q(),N==null||N()}else{var j=v(c,"onUnpause"),l=v(c,"onPostUnpause");j==null||j(),C(),M(),q(),l==null||l()}return this}}}),f.updateContainerElements(e),f};const jt=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:Nt},Symbol.toStringTag,{value:"Module"})),wt=Pe(jt),Tt=Pe(ot);function Z(n){"@babel/helpers - typeof";return Z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(n)}var he,pe;function St(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function kt(n,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,Ke(a.key),a)}}function Et(n,e,r){return e&&kt(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Dt(n,e,r){return e=de(e),Ot(n,Ue()?Reflect.construct(e,r||[],de(n).constructor):e.apply(n,r))}function Ot(n,e){if(e&&(Z(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ft(n)}function Ft(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ue(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ue=function(){return!!n})()}function de(n){return de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},de(n)}function Ct(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Ne(n,e)}function Ne(n,e){return Ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Ne(n,e)}function Pt(n,e,r){return(e=Ke(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Ke(n){var e=_t(n,"string");return Z(e)=="symbol"?e:e+""}function _t(n,e){if(Z(n)!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var a=r.call(n,e);if(Z(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var ee=p,Rt=wt,At=Rt.createFocusTrap,It=Tt,Lt=It.isFocusable,$t=parseInt((he=(pe=/^(\d+)\./.exec(ee.version))===null||pe===void 0?void 0:pe[1])!==null&&he!==void 0?he:0,10),we=function(n){function e(r){var a;St(this,e),a=Dt(this,e,[r]),Pt(a,"getNodeForOption",function(i){var f,v=(f=this.internalOptions[i])!==null&&f!==void 0?f:this.originalOptions[i];if(typeof v=="function"){for(var m=arguments.length,w=new Array(m>1?m-1:0),E=1;E<m;E++)w[E-1]=arguments[E];v=v.apply(void 0,w)}if(v===!0&&(v=void 0),!v){if(v===void 0||v===!1)return v;throw new Error("`".concat(i,"` was specified but was not a node, or did not return a node"))}var C=v;if(typeof v=="string"){var P;if(C=(P=this.getDocument())===null||P===void 0?void 0:P.querySelector(v),!C)throw new Error("`".concat(i,"` as selector refers to no known node"))}return C}),a.handleDeactivate=a.handleDeactivate.bind(a),a.handlePostDeactivate=a.handlePostDeactivate.bind(a),a.handleClickOutsideDeactivates=a.handleClickOutsideDeactivates.bind(a),a.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:a.handleDeactivate,onPostDeactivate:a.handlePostDeactivate,clickOutsideDeactivates:a.handleClickOutsideDeactivates},a.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var s=r.focusTrapOptions;for(var u in s)if(Object.prototype.hasOwnProperty.call(s,u)){if(u==="returnFocusOnDeactivate"||u==="onDeactivate"||u==="onPostDeactivate"||u==="checkCanReturnFocus"||u==="clickOutsideDeactivates"){a.originalOptions[u]=s[u];continue}a.internalOptions[u]=s[u]}return a.outsideClick=null,a.focusTrapElements=r.containerElements||[],a.updatePreviousElement(),a}return Ct(e,n),Et(e,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var a=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return a||(a===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var a=this.getDocument();a&&(this.previouslyFocusedElement=a.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(a){var s=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,a):this.originalOptions.clickOutsideDeactivates;return s&&(this.outsideClick={target:a.target,allowDeactivation:s}),s}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var a=this,s=function(){var i=a.getReturnFocusNode(),f=!!(a.originalOptions.returnFocusOnDeactivate&&i!==null&&i!==void 0&&i.focus&&(!a.outsideClick||a.outsideClick.allowDeactivation&&!Lt(a.outsideClick.target,a.internalOptions.tabbableOptions))),v=a.internalOptions.preventScroll,m=v===void 0?!1:v;f&&i.focus({preventScroll:m}),a.originalOptions.onPostDeactivate&&a.originalOptions.onPostDeactivate.call(null),a.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(s,s):s()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var a=this.focusTrapElements.some(Boolean);a&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(a){if(this.focusTrap){a.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var s=!a.active&&this.props.active,u=a.active&&!this.props.active,i=!a.paused&&this.props.paused,f=a.paused&&!this.props.paused;if(s&&(this.updatePreviousElement(),this.focusTrap.activate()),u){this.deactivateTrap();return}i&&this.focusTrap.pause(),f&&this.focusTrap.unpause()}else a.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var a=this,s=this.props.children?ee.Children.only(this.props.children):void 0;if(s){if(s.type&&s.type===ee.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var u=function(v){var m=a.props.containerElements;s&&($t>=19?typeof s.props.ref=="function"?s.props.ref(v):s.props.ref&&(s.props.ref.current=v):typeof s.ref=="function"?s.ref(v):s.ref&&(s.ref.current=v)),a.focusTrapElements=m||[v]},i=ee.cloneElement(s,{ref:u});return i}return null}}])}(ee.Component);we.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:At};je.exports=we;je.exports.FocusTrap=we;var Bt=je.exports;const Mt=ze(Bt),me=[{id:"light",label:"Light",accent:"#7c3aed",bg:"#f8fafc"},{id:"dark",label:"Dark",accent:"#8b5cf6",bg:"#0f172a"}];function Ut(){const[n,e]=p.useState(()=>{try{return localStorage.getItem("siteTheme")||"light"}catch{return"light"}}),[r,a]=p.useState(!1),s=p.useRef(null);p.useEffect(()=>{try{document.documentElement.setAttribute("data-theme",n),localStorage.setItem("siteTheme",n)}catch{}},[n]),p.useEffect(()=>{function f(v){s.current&&!s.current.contains(v.target)&&a(!1)}return window.addEventListener("click",f),()=>window.removeEventListener("click",f)},[]);function u(f){e(f),a(!1)}const i=me.find(f=>f.id===n)||me[0];return t.jsxs("div",{className:"relative",ref:s,children:[t.jsxs("button",{type:"button","aria-haspopup":"true","aria-expanded":r,onClick:()=>a(f=>!f),className:"theme-btn flex items-center gap-2 px-2 py-1 border rounded",title:`Theme: ${i.label}`,children:[t.jsx("span",{className:"w-3 h-3 rounded-full",style:{background:i.accent}}),t.jsx("span",{className:"text-sm",children:i.label})]}),r&&t.jsxs("div",{className:"absolute right-0 mt-2 w-44 elevated z-50 p-2",children:[t.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Select theme"}),t.jsx("div",{className:"grid grid-cols-1 gap-2",children:me.map(f=>t.jsxs("button",{type:"button",onClick:()=>u(f.id),className:`flex items-center gap-2 px-2 py-2 rounded hover:bg-gray-50 ${f.id===n?"ring-2 ring-offset-1 ring-purple-300":""}`,children:[t.jsx("span",{className:"w-5 h-5 rounded-full",style:{background:f.accent,boxShadow:"inset 0 0 0 2px rgba(255,255,255,0.15)"}}),t.jsxs("div",{className:"flex-1 text-left",children:[t.jsx("div",{className:"text-sm font-medium",children:f.label}),t.jsx("div",{className:"text-xs text-gray-400",children:"Preview"})]})]},f.id))})]})]})}const Kt={BASE_URL:"/admin/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"http://localhost:5000"},J={};function zt(n,e){J[n]||(J[n]=new Set),J[n].add(e)}function Vt(n,e){J[n]&&J[n].delete(e)}function te(n,e){if(J[n])for(const r of Array.from(J[n]))try{r(e)}catch(a){console.error("sse listener error",a)}}if(typeof window<"u"&&window.EventSource)try{const e=(typeof window<"u"&&window.__API_BASE__||typeof import.meta<"u"&&Kt&&void 0||"http://localhost:4001"||"").replace(/\/$/,""),r=new EventSource(e+"/sse");r.addEventListener("message",a=>{try{const s=JSON.parse(a.data||"{}");s&&s.type?te(s.type,s.data):te("message",s)}catch{te("message",a.data)}}),r.addEventListener("error",a=>{te("error",a)})}catch{}const Oe={on:zt,off:Vt,emit:te},be="";function qt({user:n={},role:e="employee",onNavigate:r=()=>{},onLogout:a=()=>{},updateRole:s=()=>{},closeMenu:u=()=>{}}){const[i,f]=p.useState(!1),[v,m]=p.useState((n==null?void 0:n.avatar)||"/default-avatar.png"),[w,E]=p.useState((n==null?void 0:n.name)||""),[C,P]=p.useState(!1),R=p.useRef(null);p.useEffect(()=>{m((n==null?void 0:n.avatar)||"/default-avatar.png"),E((n==null?void 0:n.name)||"")},[n]);async function H(D){var B;console.log("üì∏ Photo change triggered",D.target.files);const F=D.target.files&&D.target.files[0];if(!F){console.log("‚ùå No file selected");return}console.log("‚úÖ File selected:",F.name,F.type,F.size);const _=new FormData;_.append("photo",F);const L=localStorage.getItem("app_token");console.log("üîë Token:",L?"Found":"Not found");try{P(!0);const S=await(await fetch(`${be}/api/user/photo`,{method:"POST",headers:L?{Authorization:`Bearer ${L}`}:{},body:_})).json().catch(()=>({}));if(console.log("üì• Photo upload response:",S),S!=null&&S.success&&(S!=null&&S.user)){const U=(S==null?void 0:S.photoUrl)||(S==null?void 0:S.avatarUrl)||((B=S==null?void 0:S.user)==null?void 0:B.avatar);if(console.log("üñºÔ∏è Photo URL:",U),U){m(U);try{localStorage.setItem("currentUser",JSON.stringify(S.user)),window.dispatchEvent(new StorageEvent("storage",{key:"currentUser",newValue:JSON.stringify(S.user)}))}catch(V){console.warn("persist avatar failed",V)}alert("Photo updated successfully!")}}else alert("Failed to upload photo")}catch(M){console.error("Photo upload failed:",M),alert("Network error - failed to upload photo")}finally{P(!1),D.target&&(D.target.value="")}}async function z(){console.log("üíæ Saving name:",w);const D=localStorage.getItem("app_token");console.log("üîë Token:",D?"Found":"Not found");try{P(!0),console.log("üì° Sending request to:",`${be}/api/user/name`);const _=await(await fetch(`${be}/api/user/name`,{method:"PATCH",headers:Object.assign({"Content-Type":"application/json"},D?{Authorization:`Bearer ${D}`}:{}),body:JSON.stringify({name:w})})).json().catch(()=>({}));if(console.log("üì• Name update response:",_),_!=null&&_.success&&(_!=null&&_.user)){try{localStorage.setItem("currentUser",JSON.stringify(_.user)),window.dispatchEvent(new StorageEvent("storage",{key:"currentUser",newValue:JSON.stringify(_.user)}))}catch(L){console.warn("persist name failed",L)}f(!1),alert("Name updated successfully!")}else alert("Failed to update name")}catch(F){console.error("Name update failed:",F),alert("Network error - failed to update name")}finally{P(!1)}}function O(){console.log("üñ±Ô∏è Change photo button clicked"),console.log("üìé File input ref:",R.current),setTimeout(()=>{R.current?(console.log("‚úÖ Triggering file input click"),R.current.click()):console.log("‚ùå File input ref not found")},0)}return t.jsxs("div",{className:"p-3",children:[t.jsxs("div",{className:"profile-menu-header",style:{padding:12},children:[v?t.jsx("img",{src:v,alt:w||"User avatar",className:"profile-avatar"}):t.jsx("div",{className:"profile-avatar initials",children:(w||"D").charAt(0).toUpperCase()}),t.jsx("div",{style:{marginLeft:10,flex:1},children:i?t.jsxs("div",{children:[t.jsx("input",{id:"profile-name-input",value:w,onChange:D=>E(D.target.value),className:"border px-2 py-1 rounded"}),t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[t.jsx("button",{type:"button",className:"btn btn-primary",onClick:z,disabled:C,children:C?"Saving...":"Save"}),t.jsx("button",{type:"button",className:"btn btn-ghost",onClick:()=>f(!1),children:"Cancel"})]})]}):t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold",style:{color:"var(--card-text)"},children:w}),t.jsx("div",{className:"text-xs text-muted",children:(n==null?void 0:n.email)||""}),t.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[t.jsx("button",{type:"button",className:"btn btn-ghost text-sm whitespace-nowrap",onClick:D=>{D.preventDefault(),D.stopPropagation(),O()},disabled:C,style:{cursor:"pointer",zIndex:10001},children:C?"Uploading...":"Change photo"}),t.jsx("button",{type:"button",className:"btn btn-ghost text-sm whitespace-nowrap",onClick:D=>{D.preventDefault(),D.stopPropagation(),f(!0),setTimeout(()=>{const F=document.getElementById("profile-name-input");F&&F.focus()},50)},style:{cursor:"pointer",zIndex:10001},children:"Edit name"})]})]})})]}),t.jsx("input",{ref:R,id:"photoInput",type:"file",accept:"image/*",style:{position:"absolute",left:"-9999px",width:1,height:1,opacity:0},onChange:H}),t.jsx("div",{className:"profile-menu-divider"}),t.jsx("button",{type:"button",className:"profile-menu-item",onClick:()=>{u(),r("/profile")},children:"Profile"}),t.jsx("button",{type:"button",className:"profile-menu-item",onClick:()=>{u(),r("/settings")},children:"Settings"}),t.jsx("div",{className:"profile-menu-divider"}),t.jsx("button",{type:"button",className:"profile-menu-item profile-logout",onClick:()=>{u(),a()},children:"Logout"})]})}const Fe={"‚úàÔ∏è":"linear-gradient(135deg, #6366f1, #8b5cf6)","‚úà":"linear-gradient(135deg, #6366f1, #8b5cf6)","üè®":"linear-gradient(135deg, #f59e0b, #d97706)","üöó":"linear-gradient(135deg, #10b981, #059669)","üí∞":"linear-gradient(135deg, #ec4899, #db2777)","üìã":"linear-gradient(135deg, #6366f1, #8b5cf6)","üßæ":"linear-gradient(135deg, #6366f1, #8b5cf6)","üë•":"linear-gradient(135deg, #06b6d4, #0891b2)","üìç":"linear-gradient(135deg, #f59e0b, #d97706)","‚è±":"linear-gradient(135deg, #10b981, #059669)","‚è±Ô∏è":"linear-gradient(135deg, #10b981, #059669)","‚úÖ":"linear-gradient(135deg, #22c55e, #16a34a)",default:"linear-gradient(135deg, #6366f1, #8b5cf6)"};function ie({title:n,value:e,subtitle:r,icon:a,onClick:s,small:u}){const i=u?"text-xl":"text-2xl",f=u?"w-10 h-10 text-base":"w-12 h-12 text-xl",v=Fe[a]||Fe.default;return t.jsx("div",{className:`bg-white rounded-xl p-4 shadow-sm border border-gray-100 hover:shadow-md transition-shadow ${s?"cursor-pointer":""}`,onClick:s,role:s?"button":void 0,tabIndex:s?0:void 0,children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`${f} rounded-xl flex items-center justify-center shadow-sm`,style:{background:v,color:"white"},children:a||"‚Ä¢"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-sm text-gray-500 font-medium",children:n}),t.jsx("div",{className:`${i} font-bold text-slate-800`,children:typeof e=="number"?e.toLocaleString():e}),r&&t.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:r})]})]})})}const Gt=p.lazy(()=>fe(()=>import("./GlobalMap-C0nfcmNL.js"),__vite__mapDeps([0,1,2,3]))),Jt=p.lazy(()=>fe(()=>import("./RiskFeed-Bb5iKY7I.js"),__vite__mapDeps([4,1,2]))),Wt=p.lazy(()=>fe(()=>import("./WidgetManager-DXBWONO-.js"),__vite__mapDeps([5,1,2]))),Ce=p.lazy(()=>fe(()=>import("./CorporateDonut-DjI_qHSz.js"),__vite__mapDeps([6,1,2]))),ge="http://localhost:5000",Ht={airfare:0,hotels:0,cars:0,total:0,trips:0,travelers:0,destinations:0,avgPlanBook:"N/A",avgApproval:"N/A",flightsCount:0,hotelsCount:0,carsCount:0,hotelNights:0,carDays:0},Y=["#60a5fa","#34d399","#fbbf24","#f87171","#a78bfa","#38bdf8","#4ade80"],Q=()=>t.jsx("div",{className:"flex items-center justify-center p-8",children:t.jsx("div",{className:"w-8 h-8 border-4 border-indigo-200 border-t-indigo-500 rounded-full animate-spin"})});function Zt(){var j;const n=Ve(),e=qe(),[r,a]=p.useState(!1),[s,u]=p.useState(()=>{try{const l=localStorage.getItem("dashboard_widgets");if(l)return JSON.parse(l)}catch{}return["tripFrequency","topDestinations","riskFeed"]}),[i,f]=p.useState(()=>{try{return JSON.parse(localStorage.getItem("currentUser"))||{name:"Admin",email:"admin@example.com"}}catch{return{name:"Admin",email:"admin@example.com"}}}),[v,m]=p.useState(!1),w=p.useRef(null),E=p.useRef(null),C=p.useRef(null),[P,R]=p.useState({}),[H,z]=p.useState(()=>localStorage.getItem("currentRole")||"employee"),[O,D]=p.useState(Ht),[F,_]=p.useState([]),[L,B]=p.useState(!1);p.useEffect(()=>{let l=!0;const d=new AbortController;async function b(){try{const $={Authorization:`Bearer ${localStorage.getItem("app_token")}`,"Content-Type":"application/json"},[I,y]=await Promise.all([fetch(`${ge}/api/kpi?range=30d`,{signal:d.signal,headers:$}),fetch(`${ge}/api/trips`,{signal:d.signal,headers:$})]);if(!l)return;if(I!=null&&I.ok){const x=await I.json();if(x!=null&&x.success&&x.kpis){const k=x.kpis;D({airfare:Number(k.total_airfare)||0,hotels:Number(k.total_hotels)||0,cars:Number(k.total_cars)||0,total:Number(k.total_spend)||0,trips:Number(k.trips_count)||0,travelers:Number(k.distinct_travelers)||0,destinations:Number(k.destinations_count)||0,avgPlanBook:k.avg_booking_lead_days?`${Math.round(k.avg_booking_lead_days*10)/10} days`:"N/A",avgApproval:"N/A",flightsCount:Number(k.flights_count)||0,hotelsCount:Number(k.hotels_count)||0,carsCount:Number(k.cars_count)||0,hotelNights:Number(k.hotel_nights)||0,carDays:Number(k.car_days)||0})}}if(y!=null&&y.ok){const x=await y.json();x.success&&x.trips&&_(x.trips)}}catch(A){A.name!=="AbortError"&&console.warn("fetchAllData failed",A)}}b();const g=setInterval(b,3e4);return()=>{l=!1,d.abort(),clearInterval(g)}},[]);const{tripFrequencyData:M,topDestinationsData:S,reasonsData:U}=p.useMemo(()=>{if(!F.length)return{tripFrequencyData:[],topDestinationsData:[],reasonsData:[]};const l={},d=new Date;for(let y=5;y>=0;y--){const x=new Date(d.getFullYear(),d.getMonth()-y,1);l[x.toISOString().slice(0,7)]=0}F.forEach(y=>{if(y.start){const x=y.start.slice(0,7);x in l&&l[x]++}});const b=Object.entries(l).map(([y,x])=>({month:new Date(y+"-01").toLocaleDateString("en-US",{month:"short"}),count:x})),g={};F.forEach(y=>{y.destination&&(g[y.destination]=(g[y.destination]||0)+1)});const A=Object.entries(g).sort((y,x)=>x[1]-y[1]).slice(0,5).map(([y,x])=>({label:y,value:x})),$={};F.forEach(y=>{const x=y.purpose||"Other";let k="Other";/meeting|client/i.test(x)?k="Client Meetings":/conference/i.test(x)?k="Conferences":/training/i.test(x)?k="Training":/site|visit/i.test(x)?k="Site Visits":/sales/i.test(x)&&(k="Sales"),$[k]=($[k]||0)+1});const I=Object.entries($).map(([y,x])=>({name:y,value:x})).sort((y,x)=>x.value-y.value);return{tripFrequencyData:b,topDestinationsData:A,reasonsData:I}},[F]);p.useEffect(()=>{function l(d){try{const b=typeof d.data=="string"?JSON.parse(d.data):d.data;D(g=>({...g,trips:(Number(g.trips)||0)+1,travelers:(Number(g.travelers)||0)+1,destinations:(Number(g.destinations)||0)+1,total:(Number(g.total)||0)+(parseFloat(b.costEstimate||0)||0)}))}catch(b){console.warn("sse parse error",b)}}return Oe.on("trip-created",l),()=>Oe.off("trip-created",l)},[]),p.useEffect(()=>{function l(d){w.current&&!w.current.contains(d.target)&&m(!1)}return document.addEventListener("click",l),()=>document.removeEventListener("click",l)},[]),p.useEffect(()=>{if(!v)return;function l(){const d=C.current;if(!d)return;const b=d.getBoundingClientRect(),g=Math.min(Math.max(b.bottom+8,12),window.innerHeight-40);R({top:`${g}px`,right:"12px"})}return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[v]);const V=p.useCallback(l=>{localStorage.setItem("currentRole",l),z(l),window.dispatchEvent(new CustomEvent("role-updated",{detail:l}))},[]),q=p.useCallback(l=>{if(!l)return;const d=new FileReader;d.onload=()=>{const b={...i,avatar:d.result};f(b),localStorage.setItem("currentUser",JSON.stringify(b))},d.readAsDataURL(l)},[i]),T=p.useCallback(()=>{const l={...i};delete l.avatar,f(l),localStorage.setItem("currentUser",JSON.stringify(l))},[i]),o=p.useCallback(async()=>{try{const l=localStorage.getItem("app_token");l&&await fetch(`${ge}/api/auth/logout`,{method:"POST",headers:{Authorization:`Bearer ${l}`}}).catch(()=>{})}catch{}localStorage.removeItem("currentRole"),localStorage.removeItem("currentUser"),localStorage.removeItem("app_token"),f({name:"Guest",email:""}),z("employee"),n("/login",{replace:!0})},[n]),c=p.useCallback(l=>(e==null?void 0:e.pathname)===l,[e==null?void 0:e.pathname]),h=p.useCallback((l,d)=>d?n(l,d):n(l),[n]),N=p.useMemo(()=>F.map(l=>({name:l.destination,lat:0,lng:0,status:l.status})),[F]);return t.jsxs("div",{className:"min-h-screen app-root font-sans text-gray-800",children:[L&&t.jsx("div",{className:"mobile-overlay",onClick:()=>B(!1)}),t.jsxs("div",{className:"flex",children:[t.jsx("button",{className:"mobile-menu-toggle",onClick:()=>B(!L),"aria-label":"Toggle menu",children:L?"‚úï":"‚ò∞"}),t.jsxs("aside",{className:`sidebar ${r?"collapsed":""} ${L?"mobile-open":""}`,children:[t.jsxs("div",{className:"sidebar-header",children:[t.jsx("span",{className:"sidebar-logo-icon",children:"‚úà"}),t.jsx("span",{className:"sidebar-logo",children:"Employee Travel Portal"})]}),t.jsxs("div",{className:"sidebar-user",ref:w,children:[i!=null&&i.avatar?t.jsx("img",{src:i.avatar,alt:i.name,className:"sidebar-user-avatar object-cover"}):t.jsx("div",{className:"sidebar-user-avatar",children:((j=i==null?void 0:i.name)==null?void 0:j.charAt(0).toUpperCase())||"U"}),t.jsxs("div",{className:"sidebar-user-info",children:[t.jsx("div",{className:"sidebar-user-name",children:(i==null?void 0:i.name)||"User"}),t.jsx("div",{className:"sidebar-user-email",children:(i==null?void 0:i.email)||""})]}),t.jsx("button",{ref:C,type:"button",className:`toggle-btn ${v?"profile-open":""}`,onClick:()=>m(l=>!l),style:{color:"rgba(255,255,255,0.7)"},children:"‚ñº"}),v&&Ge.createPortal(t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`profile-backdrop ${v?"open":""}`,onClick:()=>m(!1)}),t.jsx(Mt,{active:v,focusTrapOptions:{clickOutsideDeactivates:!0,fallbackFocus:()=>C.current||document.body},children:t.jsx("div",{ref:E,style:P,className:`profile-menu ${v?"open":""}`,role:"menu",children:t.jsx(qt,{user:i,role:H,onPickAvatar:q,onSaveName:l=>{const d={...i,name:l};f(d),localStorage.setItem("currentUser",JSON.stringify(d))},onRemoveAvatar:T,onNavigate:h,onLogout:o,updateRole:V,closeMenu:()=>m(!1)})})})]}),document.body)]}),t.jsx("nav",{className:"sidebar-nav",children:[{path:"/dashboard",icon:"üè†",label:"Dashboard"},{path:"/analytics",icon:"üìä",label:"Analytics"},{path:"/documents",icon:"üìÑ",label:"Documents"},{path:"/expense",icon:"üí≥",label:"Expense"},{path:"/policy",icon:"üìã",label:"Policy"},{path:"/risk",icon:"‚ö†Ô∏è",label:"Risk"},{path:"/trips",icon:"üóìÔ∏è",label:"Trips"},{path:"/admin/trips",icon:"‚öôÔ∏è",label:"Admin"}].map(l=>t.jsxs("button",{title:l.label,className:`nav-button ${c(l.path)?"nav-active":""}`,onClick:()=>{h(l.path),B(!1)},type:"button",children:[t.jsx("span",{className:"nav-icon",children:l.icon}),t.jsx("span",{className:"nav-label",children:l.label})]},l.path))})]}),t.jsx("main",{className:"main-content flex-1",children:t.jsxs("div",{className:"dashboard-container",children:[t.jsxs("header",{className:"dashboard-header-section",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"dashboard-title",children:"Travel Dashboard"}),t.jsxs("p",{className:"dashboard-subtitle",children:["Welcome back, ",(i==null?void 0:i.name)||"Admin"]})]}),t.jsx("div",{className:"header-actions",children:t.jsx(Ut,{})})]}),t.jsxs("section",{className:"kpi-grid-section",children:[t.jsx(ie,{title:"Airfare",value:`${(O.airfare||0).toLocaleString()}`,subtitle:"Total airfare spend",icon:"‚úàÔ∏è"}),t.jsx(ie,{title:"Hotels",value:`${(O.hotels||0).toLocaleString()}`,subtitle:"Total hotel spend",icon:"üè®"}),t.jsx(ie,{title:"Cars",value:`${(O.cars||0).toLocaleString()}`,subtitle:"Total car rentals",icon:"üöó"}),t.jsx(ie,{title:"Total Spend",value:`${(O.total||0).toLocaleString()}`,subtitle:"Combined expenses",icon:"üí∞"})]}),t.jsxs("section",{className:"stats-grid-section",children:[t.jsxs("div",{className:"stat-card-item",children:[t.jsx("div",{className:"stat-icon-box purple",children:"üìã"}),t.jsxs("div",{children:[t.jsx("div",{className:"stat-value-text",children:O.trips||0}),t.jsx("div",{className:"stat-label-text",children:"Total Trips"})]})]}),t.jsxs("div",{className:"stat-card-item",children:[t.jsx("div",{className:"stat-icon-box cyan",children:"üë•"}),t.jsxs("div",{children:[t.jsx("div",{className:"stat-value-text",children:O.travelers||0}),t.jsx("div",{className:"stat-label-text",children:"Travelers"})]})]}),t.jsxs("div",{className:"stat-card-item",children:[t.jsx("div",{className:"stat-icon-box amber",children:"üìç"}),t.jsxs("div",{children:[t.jsx("div",{className:"stat-value-text",children:O.destinations||0}),t.jsx("div",{className:"stat-label-text",children:"Destinations"})]})]}),t.jsxs("div",{className:"stat-card-item",children:[t.jsx("div",{className:"stat-icon-box green",children:"‚è±Ô∏è"}),t.jsxs("div",{children:[t.jsx("div",{className:"stat-value-text",children:O.avgPlanBook}),t.jsx("div",{className:"stat-label-text",children:"Avg. Booking Lead"})]})]}),t.jsxs("div",{className:"stat-card-item",children:[t.jsx("div",{className:"stat-icon-box pink",children:"‚úàÔ∏è"}),t.jsxs("div",{children:[t.jsx("div",{className:"stat-value-text",children:O.flightsCount||0}),t.jsx("div",{className:"stat-label-text",children:"Flights Booked"})]})]})]}),t.jsxs("section",{className:"charts-section",children:[t.jsxs("div",{className:"chart-card-large",children:[t.jsx("h3",{className:"chart-title",children:"Travel Reasons"}),U.length>0?t.jsxs("div",{className:"chart-content-flex",children:[t.jsx("div",{className:"donut-container",children:t.jsx(p.Suspense,{fallback:t.jsx(Q,{}),children:t.jsx(Ce,{data:U,colors:Y,size:200})})}),t.jsx("div",{className:"chart-legend",children:t.jsx("ul",{className:"legend-list",children:U.map((l,d)=>t.jsxs("li",{className:"legend-item",children:[t.jsxs("div",{className:"legend-label",children:[t.jsx("span",{className:"legend-dot",style:{backgroundColor:Y[d%Y.length]}}),t.jsx("span",{className:"legend-text",children:l.name})]}),t.jsx("span",{className:"legend-value",children:l.value})]},d))})})]}):t.jsx("div",{className:"empty-state",children:"No travel data available"})]}),t.jsxs("div",{className:"quick-stats-column",children:[t.jsx("div",{className:"gradient-card-purple",children:t.jsxs("div",{className:"gradient-card-content",children:[t.jsxs("div",{children:[t.jsx("div",{className:"gradient-card-label",children:"Flights"}),t.jsx("div",{className:"gradient-card-value",children:O.flightsCount||0})]}),t.jsxs("div",{className:"gradient-card-right",children:[t.jsxs("div",{className:"gradient-card-amount",children:["$",(O.airfare||0).toLocaleString()]}),t.jsx("div",{className:"gradient-card-sublabel",children:"Total spend"})]})]})}),t.jsx("div",{className:"white-stat-card",children:t.jsxs("div",{className:"white-stat-content",children:[t.jsxs("div",{children:[t.jsx("div",{className:"white-stat-label",children:"Hotels"}),t.jsx("div",{className:"white-stat-value",children:O.hotelsCount||0})]}),t.jsxs("div",{className:"white-stat-right",children:[t.jsxs("div",{className:"white-stat-detail",children:[O.hotelNights||0," Nights"]}),t.jsx("div",{className:"star-rating",children:"‚≠ê".repeat(4)})]})]})}),t.jsx("div",{className:"white-stat-card",children:t.jsxs("div",{className:"white-stat-content",children:[t.jsxs("div",{children:[t.jsx("div",{className:"white-stat-label",children:"Car Rentals"}),t.jsx("div",{className:"white-stat-value",children:O.carsCount||0})]}),t.jsxs("div",{className:"white-stat-detail",children:[O.carDays||0," Days"]})]})})]})]}),t.jsxs("section",{className:"charts-section",children:[t.jsxs("div",{className:"chart-card-large",children:[t.jsx("h3",{className:"chart-title",children:"Trip Frequency (Last 6 Months)"}),M.length>0?t.jsx("div",{className:"bar-chart-container",children:M.map(l=>{const d=Math.max(...M.map(g=>g.count||1)),b=d>0?l.count/d*100:0;return t.jsxs("div",{className:"bar-column",children:[t.jsx("div",{className:"bar-fill",style:{height:`${Math.max(b,8)}%`}}),t.jsx("div",{className:"bar-month",children:l.month}),t.jsx("div",{className:"bar-count",children:l.count})]},l.month)})}):t.jsx("div",{className:"empty-state",children:"No trip data available"})]}),t.jsxs("div",{className:"chart-card-small",children:[t.jsx("h3",{className:"chart-title",children:"Top Destinations"}),S.length>0?t.jsxs("div",{className:"chart-content-flex",children:[t.jsx("div",{className:"donut-container-small",children:t.jsx(p.Suspense,{fallback:t.jsx(Q,{}),children:t.jsx(Ce,{data:S.map(l=>({name:l.label,value:l.value})),colors:Y,size:140})})}),t.jsx("div",{className:"chart-legend",children:t.jsx("ul",{className:"legend-list-compact",children:S.map((l,d)=>{const b=S.reduce((g,A)=>g+A.value,0)||1;return t.jsxs("li",{className:"legend-item-compact",children:[t.jsxs("div",{className:"legend-label",children:[t.jsx("span",{className:"legend-dot-small",style:{backgroundColor:Y[d%Y.length]}}),t.jsx("span",{className:"legend-text-small",children:l.label})]}),t.jsxs("span",{className:"legend-percent",children:[Math.round(l.value/b*100),"%"]})]},l.label)})})})]}):t.jsx("div",{className:"empty-state",children:"No destination data"})]})]}),t.jsxs("section",{className:"map-widgets-section",children:[t.jsxs("div",{className:"map-card-container",children:[t.jsxs("div",{className:"card-header",children:[t.jsx("div",{className:"card-header-icon purple",children:"üåç"}),t.jsxs("div",{children:[t.jsx("h3",{className:"card-header-title",children:"Global Travel Map"}),t.jsx("p",{className:"card-header-subtitle",children:"Interactive destination overview"})]})]}),t.jsx("div",{className:"map-container",children:t.jsx(p.Suspense,{fallback:t.jsx(Q,{}),children:t.jsx(Gt,{locations:N})})})]}),t.jsxs("div",{className:"widgets-column",children:[t.jsxs("div",{className:"widget-card-container",children:[t.jsxs("div",{className:"card-header",children:[t.jsx("div",{className:"card-header-icon green",children:"‚öôÔ∏è"}),t.jsxs("div",{children:[t.jsx("h3",{className:"card-header-title",children:"Widget Settings"}),t.jsx("p",{className:"card-header-subtitle",children:"Customize your dashboard"})]})]}),t.jsx("div",{className:"widget-content",children:t.jsx(p.Suspense,{fallback:t.jsx(Q,{}),children:t.jsx(Wt,{initial:s,onChange:u})})})]}),s.includes("riskFeed")&&t.jsxs("div",{className:"widget-card-container",children:[t.jsxs("div",{className:"card-header",children:[t.jsx("div",{className:"card-header-icon red",children:"‚ö†Ô∏è"}),t.jsxs("div",{children:[t.jsx("h3",{className:"card-header-title",children:"Risk Alerts"}),t.jsx("p",{className:"card-header-subtitle",children:"Real-time travel advisories"})]})]}),t.jsx("div",{className:"risk-feed-container",children:t.jsx(p.Suspense,{fallback:t.jsx(Q,{}),children:t.jsx(Jt,{})})})]})]})]})]})})]})]})}export{Zt as default};
